{{- $curPage := .Page -}}
{{ with $curPage }}
{{- $styleFiles := (slice
	"wtg-shell/components/link-button-head-nav.css"
	"wtg-shell/components/common.css"
	"wtg-shell/components/top-nav-first-buttons.css"
) -}}
{{- $link := printf "<a href=%q>%s</a>" "/" site.Title }}
{{- $linkButtonDict := (dict "styleFiles" $styleFiles "Page" $curPage "componentName" "link-button" "slotFills" (slice $link)) -}}
{{- if templates.Exists "partials/wtg-theme/components/common.html" -}}
	{{- partialCached "wtg-theme/components/common.html" $linkButtonDict (printf "%s%s%s" "link-button" (delimit $styleFiles " ") $link) -}}
{{- else if templates.Exists "partials/wtg-shell/components/common.html" -}}
	{{- partialCached "wtg-shell/components/common.html" $linkButtonDict (printf "%s%s%s" "link-button" (delimit $styleFiles " ") $link) -}}
{{- end -}}
{{- /* Next header piece placeholder for language selector */ -}}
	<language-selector></language-selector>
{{- /* Next header piece is/are menu items */}}

{{/* if a 'main' menu is defined */}}
{{- with site.Menus.main -}}
{{- $styleFiles := (slice
	"wtg-shell/components/link-button-head-nav.css"
	"wtg-shell/components/common.css"
) -}}
{{- range . }}
	{{- $link := printf "<a href=%q>%s</a>" .URL .Name }}
	{{- $linkButtonDict := (dict "styleFiles" $styleFiles "Page" $curPage "componentName" "link-button" "slotFills" (slice $link)) -}}
	{{- if templates.Exists "partials/wtg-theme/components/common.html" -}}
		{{- partialCached "wtg-theme/components/common.html" $linkButtonDict (printf "%s%s%s" "link-button" (delimit $styleFiles " ") $link) -}}
	{{- else -}}
		{{- if templates.Exists "partials/wtg-shell/components/common.html" -}}
			{{- partialCached "wtg-shell/components/common.html" $linkButtonDict (printf "%s%s%s" "link-button" (delimit $styleFiles " ") $link) -}}
		{{- else -}}
			<a href="{{- .URL -}}">{{- .Name -}}</a>
		{{- end -}}
	{{- end -}}
{{- end -}}
{{- else -}}
{{- /* Final section(s) is/are 'mainSections' items, if present */ -}}
{{- range site.Params.mainSections -}}
	{{- $page := site.GetPage ( printf "/%s" . ) -}}
	{{- with $page }}
		<a href="{{ .RelPermalink }}">
			{{- if templates.Exists "partials/wtg-theme/helpers/find-link-title" -}}
				{{- partialCached "wtg-theme/helpers/find-link-title" . . -}}
			{{- else -}}
				{{- partialCached "wtg-shell/helpers/find-link-title" . . -}}
			{{- end -}}
		</a>
		{{- end -}}
	{{- end -}}
{{- end -}}
{{- end -}}
